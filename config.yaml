version: 1

environment:
  path: .env

# API Configuration for chat and embedding services
api_config:
  # Global defaults for chat API
  chat_api:
    provider: "openai"  # openai, ollama, custom
    model: "gpt-3.5-turbo"
    timeout: 30
    max_retries: 3
    retry_delay: 1.0
    max_retry_delay: 60.0
  
  # Global defaults for embedding API
  embedding_api:
    provider: "openai"  # openai, ollama, custom
    model: "text-embedding-3-small"
    dimension: 1536
    timeout: 30
    max_retries: 3
    retry_delay: 1.0
    max_retry_delay: 60.0
  
  # Per-agent model overrides (optional)
  agent_overrides:
    coordination:
      chat_model: "gpt-4"
      embedding_model: "text-embedding-3-large"
      embedding_dimension: 3072
    python_expert:
      chat_model: "gpt-4"
    milvus_expert:
      chat_model: "gpt-3.5-turbo"
    devops_expert:
      chat_model: "gpt-3.5-turbo"

network:
  name: multi-agent-http
  transport: http
  settings:
    host: 0.0.0.0
    port: 8700
    cors:
      allow_origins:
        - "*"
      allow_credentials: true
      allow_methods:
        - "*"
      allow_headers:
        - "*"

channels:
  general:
    description: "Entry point for user conversations and ad-hoc requests."
    entrypoint: agents.general:GeneralAgent
    visibility: public
    targets:
      - coordination

  coordination:
    description: "Routes work between specialists and maintains global context."
    entrypoint: agents.coordination:CoordinationAgent
    visibility: internal
    targets:
      - python_expert
      - milvus_expert
      - devops_expert

  python_expert:
    description: "Specialist for Python development assistance."
    entrypoint: agents.python_expert:PythonExpertAgent
    visibility: internal

  milvus_expert:
    description: "Vector database (Milvus) subject matter expert."
    entrypoint: agents.milvus_expert:MilvusExpertAgent
    visibility: internal

  devops_expert:
    description: "DevOps and infrastructure specialist."
    entrypoint: agents.devops_expert:DevOpsExpertAgent
    visibility: internal

routing:
  default_target: general
  escalations:
    general:
      - coordination
    coordination:
      - python_expert
      - milvus_expert
      - devops_expert
